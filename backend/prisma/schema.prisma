generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String   @id @default(uuid())
  name               String
  username           String   @unique
  preferredTimezone  String
  createdAt          DateTime @default(now())

  appointmentsCreated Appointment[] @relation("CreatedAppointments")
  invites             AppointmentInvitee[]
}

model Appointment {
  id         String   @id @default(uuid())
  title      String
  creator    User     @relation("CreatedAppointments", fields: [creatorId], references: [id])
  creatorId  String
  startUtc   DateTime
  endUtc     DateTime
  createdAt  DateTime @default(now())

  invitees AppointmentInvitee[]
}

model AppointmentInvitee {
  appointment   Appointment @relation(fields: [appointmentId], references: [id])
  appointmentId String
  user          User        @relation(fields: [userId], references: [id])
  userId        String

  @@id([appointmentId, userId])
}
